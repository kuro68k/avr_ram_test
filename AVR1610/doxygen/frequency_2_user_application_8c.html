<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Xmega IEC60730 Class B Library: UserApplication.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="XMEGA-3D-block-diagram.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xmega IEC60730 Class B Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('frequency_2_user_application_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">frequency/UserApplication.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This is the demo application for the CPU frequency test. </p>
<p>The test basically checks periodically that the relationship between the RTC and CPU frequencies (measured through a Timer/Counter, TC) is within a configurable range.</p>
<p>The main program consists of a loop where the device does not do anything as long as there is no error in the CPU frequency. An LED is on while the system is operating correctly. However, if the error flag should be set, the main program would exit the loop and switch off the LED.</p>
<p>In order to test that the self-diagnostic routine is correct, the CPU frequency can be modified on-the-fly by pressing the button SW0. By default the system runs from the internal 2 Mhz oscillator. The interrupt for button press changes the system clock to the internal 32 Mhz oscillator. The CPU frequency test will then fail because the frequency of the system does not match the configuration.</p>
<dl class="section user"><dt>Application note:</dt><dd>AVR1610: Guide to IEC60730 Class B compliance with XMEGA</dd></dl>
<dl class="section user"><dt>Documentation</dt><dd>For comprehensive code documentation, supported compilers, compiler settings and supported devices see readme.html</dd></dl>
<dl class="section author"><dt>Author:</dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br/>
 Support email: <a href="#" onclick="location.href='mai'+'lto:'+'avr'+'@a'+'tme'+'l.'+'com'; return false;">avr@a<span style="display: none;">.nosp@m.</span>tmel<span style="display: none;">.nosp@m.</span>.com</a></dd></dl>
<p>Copyright (C) 2012 Atmel Corporation. All rights reserved. </p>

<p>Definition in file <a class="el" href="frequency_2_user_application_8c_source.html">frequency/UserApplication.c</a>.</p>
</div><div class="textblock"><code>#include &quot;<a class="el" href="avr__compiler_8h_source.html">avr_compiler.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="classb__freq_8h_source.html">classb_freq.h</a>&quot;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for frequency/UserApplication.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="frequency_2_user_application_8c__incl.png" border="0" usemap="#_user_application_8c" alt=""/></div>
<map name="_user_application_8c" id="_user_application_8c">
<area shape="rect" id="node3" href="avr__compiler_8h.html" title="Header file for compiler compatibility." alt="" coords="129,379,233,405"/><area shape="rect" id="node11" href="classb__freq_8h.html" title="Settings and definitions for the CPU frequency test." alt="" coords="132,80,231,107"/><area shape="rect" id="node14" href="classb__rtc__common_8h.html" title="Settings for the RTC driver." alt="" coords="106,155,256,181"/><area shape="rect" id="node17" href="error__handler_8h.html" title="Macros and definitions for handling errors and other configurable actions." alt="" coords="237,304,344,331"/><area shape="rect" id="node21" href="classb__interrupt__monitor_8h.html" title="This file contains settings and definitions for the interrupt monitor." alt="" coords="94,229,268,256"/></map>
</div>
</div>
<p><a href="frequency_2_user_application_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acb02f74d7428c74f749f228dec34d426"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb02f74d7428c74f749f228dec34d426"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="frequency_2_user_application_8c.html#acb02f74d7428c74f749f228dec34d426">setup_led_switches</a> ()</td></tr>
<tr class="memdesc:acb02f74d7428c74f749f228dec34d426"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets up the LED and switch. The LED is switched on to show that the system is working correctly. The switch is configured to generate an interrupt after being pressed. <br/></td></tr>
<tr class="memitem:a521b31ff4bc4494a914b2a8cabcba31e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a521b31ff4bc4494a914b2a8cabcba31e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="frequency_2_user_application_8c.html#a521b31ff4bc4494a914b2a8cabcba31e">ISR</a> (PORTE_INT0_vect)</td></tr>
<tr class="memdesc:a521b31ff4bc4494a914b2a8cabcba31e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for button press. This will change the clock frequency to 32MHz, which should be detected by the frequency test. <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gabd8069526e5340f2e8f831627ec6857c"><td class="memItemLeft" align="right" valign="top">NO_INIT volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__error__handler.html#gabd8069526e5340f2e8f831627ec6857c">classb_error</a></td></tr>
<tr class="memdesc:gabd8069526e5340f2e8f831627ec6857c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the error flag.  <a href="group__error__handler.html#gabd8069526e5340f2e8f831627ec6857c"></a><br/></td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_022c70a4c242b590c6b5b9f5062478fb.html">frequency</a></li><li class="navelem"><a class="el" href="frequency_2_user_application_8c.html">UserApplication.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
