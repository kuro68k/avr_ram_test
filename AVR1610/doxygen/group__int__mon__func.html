<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Xmega IEC60730 Class B Library: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="XMEGA-3D-block-diagram.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xmega IEC60730 Class B Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__int__mon__func.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions</div>  </div>
<div class="ingroups"><a class="el" href="group__int__monitor.html">Interrupt Monitor</a></div></div><!--header-->
<div class="contents">
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Functions related to the interrupt monitor. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa958325fad2a7c0a6d69e0793e6c4864"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__int__mon__func.html#gaa958325fad2a7c0a6d69e0793e6c4864">classb_intmon_set_state</a> (enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> identifier, enum <a class="el" href="group__int__mon__def.html#gad17386a9073850e90d645b123e5ad159">classb_int_states</a> state)</td></tr>
<tr class="memdesc:gaa958325fad2a7c0a6d69e0793e6c4864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a state for the specified interrupt.  <a href="#gaa958325fad2a7c0a6d69e0793e6c4864"></a><br/></td></tr>
<tr class="memitem:ga5914cd477488ab7f113f55cc558e1d5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__int__mon__func.html#ga5914cd477488ab7f113f55cc558e1d5e">classb_intmon_reg_int</a> (enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> identifier, uint16_t interrupt_counter, uint8_t tolerance_percent)</td></tr>
<tr class="memdesc:ga5914cd477488ab7f113f55cc558e1d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers an interrupt.  <a href="#ga5914cd477488ab7f113f55cc558e1d5e"></a><br/></td></tr>
<tr class="memitem:gaabe0261ef71c47068d7781702ba740e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__int__mon__func.html#gaabe0261ef71c47068d7781702ba740e4">classb_intmon_increase</a> (enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> identifier)</td></tr>
<tr class="memdesc:gaabe0261ef71c47068d7781702ba740e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the interrupt counter of the specified interrupt.  <a href="#gaabe0261ef71c47068d7781702ba740e4"></a><br/></td></tr>
<tr class="memitem:ga008d6c1aaa1290441c718f44af465786"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__int__mon__func.html#ga008d6c1aaa1290441c718f44af465786">classb_intmon_callback</a> (void)</td></tr>
<tr class="memdesc:ga008d6c1aaa1290441c718f44af465786"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt monitor.  <a href="#ga008d6c1aaa1290441c718f44af465786"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaa958325fad2a7c0a6d69e0793e6c4864"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void classb_intmon_set_state </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a>&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__int__mon__def.html#gad17386a9073850e90d645b123e5ad159">classb_int_states</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a state for the specified interrupt. </p>
<p>This function should be called from the main application to enable or disable monitoring this interrupt. The application can only set the state to ENABLE or DISABLE, otherwise the error handler will be called. i.e. only the monitor can set <code>ON</code> and <code>OFF</code> states. Further, if <a class="el" href="group__int__mon__conf.html#gabf5212cd83939415b446391967294727">CLASSB_STRICT</a> is defined, it is not allowed to enable an interrupt in the <code>ON</code> state, or disable an interrupt in the <code>OFF</code> state.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>Interrupt identifier. Use symbol declared in <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a>. </td></tr>
    <tr><td class="paramname">state</td><td>Interrupt state. Use symbol declared in <a class="el" href="group__int__mon__def.html#gad17386a9073850e90d645b123e5ad159">classb_int_states</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="classb__interrupt__monitor_8c_source.html#l00113">113</a> of file <a class="el" href="classb__interrupt__monitor_8c_source.html">classb_interrupt_monitor.c</a>.</p>

<p>References <a class="el" href="error__handler_8h_source.html#l00112">CLASSB_CONDITION1_INTERRUPT</a>, <a class="el" href="error__handler_8h_source.html#l00093">CLASSB_ERROR_HANDLER_INTERRUPT</a>, <a class="el" href="classb__interrupt__monitor_8h_source.html#l00134">DISABLE</a>, <a class="el" href="classb__interrupt__monitor_8h_source.html#l00133">ENABLE</a>, and <a class="el" href="classb__interrupt__monitor_8c_source.html#l00057">monitored_interrupts</a>.</p>

<p>Referenced by <a class="el" href="interrupts_2_user_application_8c_source.html#l00219">ISR()</a>.</p>

<p><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__int__mon__func_gaa958325fad2a7c0a6d69e0793e6c4864_icgraph.png" border="0" usemap="#group__int__mon__func_gaa958325fad2a7c0a6d69e0793e6c4864_icgraph" alt=""/></div>
<map name="group__int__mon__func_gaa958325fad2a7c0a6d69e0793e6c4864_icgraph" id="group__int__mon__func_gaa958325fad2a7c0a6d69e0793e6c4864_icgraph">
<area shape="rect" id="node3" href="interrupts_2_user_application_8c.html#a50668d92bbd78762e1442c21f5f0a54c" title="Interrupt for SW1 press: disable TC interrupt monitoring." alt="" coords="221,5,264,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5914cd477488ab7f113f55cc558e1d5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void classb_intmon_reg_int </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a>&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>reference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tolerance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers an interrupt. </p>
<p>This function registers the information that the monitor needs in order to check an interrupt. It should be called from the main application. Interrupts must be declared in <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> in the configuration file. Note that by default the interrupt is not active for monitoring, i.e. the state is <code>OFF</code>.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>Interrupt identifier. Use symbol declared in <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> </td></tr>
    <tr><td class="paramname">reference</td><td>Number of expected executions for the interrupt within an RTC period: <code>F_INT (Hz) * CLASSB_RTC_INT_PERIOD / CLASSB_RTC_FREQ (Hz) </code> </td></tr>
    <tr><td class="paramname">tolerance</td><td>The allowed deviation (%) with respect to interrupt_counter for the interrupt counter. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="classb__interrupt__monitor_8c_source.html#l00074">74</a> of file <a class="el" href="classb__interrupt__monitor_8c_source.html">classb_interrupt_monitor.c</a>.</p>

<p>References <a class="el" href="classb__interrupt__monitor_8c_source.html#l00057">monitored_interrupts</a>.</p>

</div>
</div>
<a class="anchor" id="gaabe0261ef71c47068d7781702ba740e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void classb_intmon_increase </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a>&#160;</td>
          <td class="paramname"><em>identifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increases the interrupt counter of the specified interrupt. </p>
<p>This is called from the interrupt routine and it will increases the counter if the interrupt is <code>ON</code>.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>Interrupt identifier. Use symbol declared in <a class="el" href="group__int__mon__conf.html#gae6749aecac8d230b89b69c5bed0548d5">classb_int_identifiers</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="classb__interrupt__monitor_8c_source.html#l00093">93</a> of file <a class="el" href="classb__interrupt__monitor_8c_source.html">classb_interrupt_monitor.c</a>.</p>

<p>References <a class="el" href="classb__interrupt__monitor_8c_source.html#l00057">monitored_interrupts</a>.</p>

<p>Referenced by <a class="el" href="interrupts_2_user_application_8c_source.html#l00229">ISR()</a>.</p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__int__mon__func_gaabe0261ef71c47068d7781702ba740e4_icgraph.png" border="0" usemap="#group__int__mon__func_gaabe0261ef71c47068d7781702ba740e4_icgraph" alt=""/></div>
<map name="group__int__mon__func_gaabe0261ef71c47068d7781702ba740e4_icgraph" id="group__int__mon__func_gaabe0261ef71c47068d7781702ba740e4_icgraph">
<area shape="rect" id="node3" href="interrupts_2_user_application_8c.html#a924e0530acf32dec8097d00b9474b0fc" title="TC overflow interrupt." alt="" coords="216,5,259,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga008d6c1aaa1290441c718f44af465786"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void classb_intmon_callback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The interrupt monitor. </p>
<p>For each registered interrupt, this function compares the counter with the expected value. There is an error if the difference is greater than the limit or if the interrupt is disabled and the counter is different than zero. If <a class="el" href="group__error__handler.html#ga8447a8ad98faf997f278dea60a6ed492">CLASSB_CONDITION2_INTERRUPT</a> is true, the monitor will stop immediately, i.e. the remaining interrupts are not checked.</p>
<dl class="section note"><dt>Note:</dt><dd>This should be called back from the RTC interrupt. See <a class="el" href="group__rtc__driver.html">Real Time Counter Driver</a>. </dd></dl>

<p>Definition at line <a class="el" href="classb__interrupt__monitor_8c_source.html#l00167">167</a> of file <a class="el" href="classb__interrupt__monitor_8c_source.html">classb_interrupt_monitor.c</a>.</p>

<p>References <a class="el" href="error__handler_8h_source.html#l00115">CLASSB_CONDITION2_INTERRUPT</a>, <a class="el" href="error__handler_8h_source.html#l00093">CLASSB_ERROR_HANDLER_INTERRUPT</a>, <a class="el" href="classb__interrupt__monitor_8h_source.html#l00134">DISABLE</a>, <a class="el" href="classb__interrupt__monitor_8h_source.html#l00133">ENABLE</a>, <a class="el" href="classb__interrupt__monitor_8c_source.html#l00057">monitored_interrupts</a>, and <a class="el" href="classb__interrupt__monitor_8h_source.html#l00113">N_INTERRUPTS</a>.</p>

<p>Referenced by <a class="el" href="classb__rtc__common_8c_source.html#l00133">ISR()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__int__mon__func_ga008d6c1aaa1290441c718f44af465786_icgraph.png" border="0" usemap="#group__int__mon__func_ga008d6c1aaa1290441c718f44af465786_icgraph" alt=""/></div>
<map name="group__int__mon__func_ga008d6c1aaa1290441c718f44af465786_icgraph" id="group__int__mon__func_ga008d6c1aaa1290441c718f44af465786_icgraph">
<area shape="rect" id="node3" href="group__rtc__driver.html#ga62df017ada5978ef83ec1ae9082ffcfc" title="This is the RTC compare interrupt." alt="" coords="216,5,259,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
